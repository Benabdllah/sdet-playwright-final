{
  "name": "Playwright Test Environment (SDET+++++ Edition)",
  "image": "mcr.microsoft.com/playwright:v1.56.1-noble",

  // Korrektur: Der Workspace liegt im Unterordner â†’ VS Code Ã¶ffnet direkt dort
  "workspaceFolder": "/workspaces/Sdet-pw-practice-app",

  "runArgs": [
    "--shm-size=2g",
    "--memory=4g",
    "--cpus=2",
    "--cap-add=SYS_ADMIN",
    "--security-opt=seccomp=unconfined",
    "--init",
    "--privileged"
  ],

  "containerEnv": {
    "CI": "true",
    "PLAYWRIGHT_BROWSERS_PATH": "/workspaces/.playwright-browsers",
    "NODE_ENV": "development",
    "FORCE_COLOR": "1",
    "NPM_CONFIG_CACHE": "/workspaces/.npm-cache"
  },

  "mounts": [
    "source=${localWorkspaceFolder}/.playwright-browsers,target=/workspaces/.playwright-browsers,type=bind,consistency=cached",
    "source=${localWorkspaceFolder}/.npm-cache,target=/workspaces/.npm-cache,type=bind,consistency=cached",
    "source=playwright-vscode-seadd .rver,target=/root/.vscode-server,type=volume"
  ],

  "customizations": {
    "vscode": {
      "extensions": [
        "ms-playwright.playwright",
        "esbenp.prettier-vscode",
        "dbaeumer.vscode-eslint",
        "ms-vscode.vscode-typescript-next",
        "firsttris.vscode-jest-runner",
        "orta.vscode-jest",
        "usernamehw.errorlens",
        "eamodio.gitlens",
        "GitHub.copilot",
        "ms-azuretools.vscode-docker",
        "humao.rest-client",
        "streetsidesoftware.code-spell-checker",
        "wayou.vscode-todo-highlight"
      ],
      "settings": {
        "terminal.integrated.defaultProfile.linux": "bash",
        "editor.formatOnSave": true,
        "editor.defaultFormatter": "esbenp.prettier-vscode",
        "editor.codeActionsOnSave": {
          "source.fixAll.eslint": "explicit",
          "source.organizeImports": "explicit"
        },
        "files.watcherExclude": {
          "**/.git/objects/**": true,
          "**/.git/subtree-cache/**": true,
          "**/node_modules/**": true,
          "**/.playwright-browsers/**": true,
          "**/.npm-cache/**": true,
          "**/playwright-report/**": true,
          "**/test-results/**": true
        },
        "search.exclude": {
          "**/node_modules": true,
          "**/.playwright-browsers": true,
          "**/.npm-cache": true,
          "**/playwright-report": true,
          "**/test-results": true
        },
        "playwright.reuseBrowser": true,
        "playwright.showTrace": true,
        "typescript.tsdk": "node_modules/typescript/lib",
        "typescript.enablePromptUseWorkspaceTsdk": true,
        "git.autofetch": true,
        "git.enableSmartCommit": true,
        "errorLens.enabledDiagnosticLevels": ["error", "warning"]
      }
    }
  },

  "features": {
    "ghcr.io/devcontainers/features/common-utils:2": {
      "installZsh": false,
      "installOhMyZsh": false
    },
    "ghcr.io/devcontainers/features/git:1": {
      "version": "latest"
    },
    "ghcr.io/devcontainers/features/github-cli:1": {
      "version": "latest"
    },
    "ghcr.io/devcontainers/features/docker-in-docker:2": {
      "version": "latest",
      "moby": true
    }
  },

  "forwardPorts": [30000, 5000, 8080, 9323],

  "portsAttributes": {
    "3000": { "label": "Application", "onAutoForward": "notify" },
    "5000": { "label": "API", "onAutoForward": "notify" },
    "8080": { "label": "Test Server", "onAutoForward": "silent" },
    "9323": { "label": "Playwright Inspector", "onAutoForward": "openBrowser" }
  },

  "remoteUser": "root",

  // Wichtig: Git-Safe-Directory fÃ¼r den korrekten Workspace-Pfad
  "postStartCommand": "git config --global --add safe.directory /workspaces/Sdet-pw-practice-app",

  // Reihenfolge optimiert: npm ci â†’ Browser installieren â†’ Ready-Message
  "updateContentCommand": "npm ci --prefer-offline",
  "onCreateCommand": "npx playwright install --with-deps",
  "postCreateCommand":"bash .devcontainer/post-create.sh", //"echo 'ðŸš€ SDET+++++ Dev Container ready! Playwright Browser installiert. Happy Testing!'",

  "shutdownAction": "stopContainer"
}
// {
//   "name": "Playwright Test Environment (SDET+++++ Edition)",
//   "image": "mcr.microsoft.com/playwright:v1.56.1-noble",
//   "workspaceFolder": "/workspace/Sdet-pw-practice-app",
  
//   "runArgs": [
//     "--shm-size=2g",
//     "--memory=4g",
//     "--cpus=2",
//     "--cap-add=SYS_ADMIN",
//     "--security-opt=seccomp=unconfined",
//     "--init"
//   ],
  
//   "containerEnv": {
//     "CI": "true",
//     "PLAYWRIGHT_BROWSERS_PATH": "/workspace/.playwright-browsers",
//     "NODE_ENV": "development",
//     "FORCE_COLOR": "1",
//     "NPM_CONFIG_CACHE": "/workspace/.npm-cache"
//   },
  
//   "mounts": [
//     "source=${localWorkspaceFolder}/.playwright-browsers,target=/workspace/.playwright-browsers,type=bind,consistency=cached",
//     "source=${localWorkspaceFolder}/.npm-cache,target=/workspace/.npm-cache,type=bind,consistency=cached",
//     "source=playwright-vscode-server,target=/root/.vscode-server,type=volume"
//   ],
  
//   //"postCreateCommand": "bash .devcontainer/post-create.sh",
  
//   "customizations": {
//     "vscode": {
//       "extensions": [
//         "ms-playwright.playwright",
//         "esbenp.prettier-vscode",
//         "dbaeumer.vscode-eslint",
//         "ms-vscode.vscode-typescript-next",
//         "firsttris.vscode-jest-runner",
//         "orta.vscode-jest",
//         "usernamehw.errorlens",
//         "eamodio.gitlens",
//         "GitHub.copilot",
//         "ms-azuretools.vscode-docker",
//         "humao.rest-client",
//         "streetsidesoftware.code-spell-checker",
//         "wayou.vscode-todo-highlight"
//       ],
//       "settings": {
//         "terminal.integrated.defaultProfile.linux": "bash",
//         "terminal.integrated.profiles.linux": {
//           "bash": {
//             "path": "/bin/bash",
//             "icon": "terminal-bash"
//           }
//         },
//         "editor.formatOnSave": true,
//         "editor.defaultFormatter": "esbenp.prettier-vscode",
//         "editor.codeActionsOnSave": {
//           "source.fixAll.eslint": "explicit",
//           "source.organizeImports": "explicit"
//         },
//         "files.watcherExclude": {
//           "**/.git/objects/**": true,
//           "**/.git/subtree-cache/**": true,
//           "**/node_modules/**": true,
//           "**/.playwright-browsers/**": true,
//           "**/.npm-cache/**": true,
//           "**/playwright-report/**": true,
//           "**/test-results/**": true
//         },
//         "search.exclude": {
//           "**/node_modules": true,
//           "**/bower_components": true,
//           "**/.playwright-browsers": true,
//           "**/.npm-cache": true,
//           "**/playwright-report": true,
//           "**/test-results": true
//         },
//         "playwright.reuseBrowser": true,
//         "playwright.showTrace": true,
//         "[typescript]": {
//           "editor.defaultFormatter": "esbenp.prettier-vscode"
//         },
//         "[javascript]": {
//           "editor.defaultFormatter": "esbenp.prettier-vscode"
//         },
//         "[json]": {
//           "editor.defaultFormatter": "esbenp.prettier-vscode"
//         },
//         "eslint.validate": [
//           "javascript",
//           "typescript"
//         ],
//         "typescript.tsdk": "node_modules/typescript/lib",
//         "typescript.enablePromptUseWorkspaceTsdk": true,
//         "git.autofetch": true,
//         "git.enableSmartCommit": true,
//         "errorLens.enabledDiagnosticLevels": [
//           "error",
//           "warning"
//         ]
//       }
//     }
//   },
  
//   "features": {
//     "ghcr.io/devcontainers/features/common-utils:2": {
//     "installZsh": false,
//     "installOhMyZsh": false
//   },
    
//     "ghcr.io/devcontainers/features/git:1": {
//       "version": "latest",
//       "ppa": true
//     },
//     "ghcr.io/devcontainers/features/github-cli:1": {
//       "version": "latest"
//     },
//     "ghcr.io/devcontainers/features/docker-in-docker:2": {
//       "version": "latest",
//       "moby": true,
//       "dockerDashComposeVersion": "v2"
//     }
    
   
//     },
  
//   "forwardPorts": [
//     3000,
//     5000,
//     8080,
//     9323    
//   ],
  
//   "portsAttributes": {
//     "3000": {
//       "label": "Application",
//       "onAutoForward": "notify"
//     },
//     "5000": {
//       "label": "API",
//       "onAutoForward": "notify"
//     },
//     "8080": {
//       "label": "Test Server",
//       "onAutoForward": "silent"
//     },
//     "9323": {
//       "label": "Playwright Inspector",
//       "onAutoForward": "openBrowser"
//     }
//   },
  
//   "remoteUser": "root",
  
//   "postStartCommand": "git config --global --add safe.directory /workspace",
  
//   "waitFor": "postCreateCommand",
//  "updateContentCommand": "npm ci --prefer-offline",
//   "onCreateCommand": "npx playwright install --with-deps",
//   "postCreateCommand": "echo 'ðŸš€ SDET+++++ Dev Container ready!'",
  
//   "shutdownAction": "stopContainer"
// } 